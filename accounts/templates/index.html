{% extends "layout.html" %}
{% block page_title %}
  {% if selected_lang %}
    {{ selected_lang.emoji }} {{ selected_lang.name }} developers | ğŸ‘©â€ğŸ’» FediDevs ğŸ§‘â€ğŸ’»
  {% else %}
    ğŸ‘©â€ğŸ’» FediDevs ğŸ§‘â€ğŸ’»
  {% endif %}
{% endblock %}
{% block title %}
  {% if selected_lang %}
    {{ selected_lang.emoji }} {{ selected_lang.name }} developers | ğŸ‘©â€ğŸ’» FediDevs ğŸ§‘â€ğŸ’»
  {% else %}
    ğŸ‘©â€ğŸ’» FediDevs ğŸ§‘â€ğŸ’»
  {% endif %}
{% endblock %}
{% block twitter_title %}
  {% if selected_lang %}
    {{ selected_lang.emoji }} {{ selected_lang.name }} developers | ğŸ‘©â€ğŸ’» FediDevs ğŸ§‘â€ğŸ’»
  {% else %}
    ğŸ‘©â€ğŸ’» FediDevs ğŸ§‘â€ğŸ’»
  {% endif %}
{% endblock %}
{% block content %}
  <header style="text-align:center;">
    <h1>ğŸ‘©â€ğŸ’» FediDevs ğŸ§‘â€ğŸ’»</h1>
    <h3>
      Discover <mark>{{ adjectives|random }}</mark> devs from across the fediverse ğŸŒ
    </h3>
    <p>
      Read <a href="{% url 'faq' %}">the FAQ</a> to see how to get listed. <a target="_blank" href="https://anze3db.ck.page/76db70f6e0 ">Sign up to the newsletter</a> for updates.
    </p>
    <p>
      Suggestions on how to make FediDevs more useful are very welcome! Feel free to reach out on <a href="https://fosstodon.org/@anze3db">Mastodon</a> or <a href="mailto:hello@fedidevs.com">Email</a>!
    </p>
  </header>
  <article>
    <nav>
      <ul style="flex-wrap: wrap; justify-content: center;">
        {% for language in languages %}
          <li>
            <a href="{% url "index" language.code %}?q={{ query }}"
               class="{% if selected_lang.code != language.code %}outline{% endif %} "
               role="button">{{ language.emoji }} {{ language.name }}</a>
          </li>
        {% endfor %}
      </ul>
    </nav>
    <form method="GET" action="{% url 'index' selected_lang.code %}">
      <div style="padding-bottom: 60px;">
        <div style="display:flex; gap: 16px;">
          <input type="text"
                 name="q"
                 placeholder="Filter by name, bio, or instance..."
                 value="{{ query }}"/>
          {% if query %}
            <a style="margin: 16px 0px;" href="{% url 'index' selected_lang.code %}">Clear</a>
          {% endif %}
          <input style="width:120px;" type="submit" value="Search" />
        </div>
      </div>
    </form>
    {% if accounts %}
      <figure>
        <table role="grid">
          <thead>
            <tr>
              <th></th>
              <th>Name</th>
              <th>Note</th>
              <th>Last Status</th>
              <th>Followers Count</th>
              <th>Source</th>
            </tr>
          </thead>
          <tbody>
            {% for account in accounts %}
              <tr>
                <td>
                  <img class="avatar"
                       src="{{ account.avatar }}"
                       alt="{{ account.login }}"
                       width="50"
                       height="50"/>
                </td>
                <td>
                  <a href="{{ account.url }}" target="_blank">{% firstof account.display_name account.username %}</a>
                </td>
                <td>{{ account.note | safe }}</td>
                <td>{{ account.last_status_at_cached }}</td>
                <td>{{ account.followers_count }}</td>
                <td>
                  <a href="https://{{ account.source }}">{{ account.source }}</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </figure>
      <footer>
        <div class="pagination">
          <span class="step-links">
            {% if accounts.has_previous %}<a href="?page={{ accounts.previous_page_number }}">&laquo; previous</a>{% endif %}
            <span class="current">Page {{ accounts.number }} of {{ accounts.paginator.num_pages }}</span>
            {% if accounts.has_next %}<a href="?page={{ accounts.next_page_number }}">next &raquo;</a>{% endif %}
          </span>
        </div>
        <p style="text-align:center">
          <small>Don't see yourself on the list? Read through <a href="{% url 'faq' %}">the FAQ</a> to make sure you're eligible to be listed.</small>
        </p>
      </footer>
    {% else %}
      <p style="text-align:center;">
        No results, <a href="{% url "index" selected_lang.code %}">try clearing your search</a>!
      </p>
    {% endif %}
  </article>
{% endblock %}
